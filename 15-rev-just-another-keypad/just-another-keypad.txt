def check(code):
  x = 0
  i = 0

  for digit in code:
    if digit < 0 or digit > 9:
      return False

    x = x | (digit << i)
    i += 4

  x = 0
  x = x | (code[0] << 0)
  x = x | (code[1] << 4)
  x = x | (code[2] << 8)
  x = x | (code[3] << 12)
  x = x | (code[4] << 16)
  x = x | (code[5] << 20)
  x = x | (code[6] << 24)
  x = x | (code[7] << 28)
  x = x | (code[8] << 32)
  x = x | (code[9] << 36)
  x = x | (code[10] << 40)
  x = x | (code[11] << 44)
  x = x | (code[12] << 48)
  x = x | (code[13] << 52)
  x = x | (code[14] << 56)
  x = x | (code[15] << 60)

  x = x ^ 0o1275437152437512431354
  x = rotate_left(x, 10)

  a = x & 1229782938247303441
  b = x & 0o0210421042104210421042
  c = x & rotate_left(1229782938247303441, 2)
  d = x & rotate_left(0o0210421042104210421042, 2)

  return (
    a == 0x0100101000011110
    and b == 0x2002220020022220
    and c == 0x4444040044044400
    and d == 0x8880008080000880
  )


def undo():
  a = 0x0100101000011110  # = x & 1229782938247303441
  b = 0x2002220020022220  # = x & 0o0210421042104210421042
  c = 0x4444040044044400  # = x & rotate_left(1229782938247303441, 2)
  d = 0x8880008080000880  # = x & rotate_left(0o0210421042104210421042, 2)

  x = 0b1110110111000110001101101001000011100100000001110111111110110000

  x = rotate_right(x, 10)
  x = 0b1110110000111011011100011000110110100100001110010000000111011111

  x = x ^ 0o1275437152437512431354
  x = 0b0100001101011000100101110010010101011001000100110011001100110011

  xs = format(x, "064b")
  code = [int(i, 2) for i in reversed([xs[i:i+4] for i in range(0, len(xs), 4)])]


  ['0011', '0011', '0011', '0011', '0011', '0001', '1001', '0101', '0101', '0010', '1111', '0001', '1000', '0101', '0011', '0100']
    3       3       3       3       3       1       9       5       5       2       _       _       8       5       3       4
    3       3       3       3       3       1       9       5       5       2       7       9       8       5       3       4


  ___0__11
| 01001100
----------------
  11100011


/*
  ___0___1___0___0___1___0___1___0___0___0___0___1___1___1___1___0
& 0001000100010001000100010001000100010001000100010001000100010001
------------------------------------------------------------------
  0000000100000000000100000001000000000000000000010001000100010000


  __10__01__00__10__11__10__01__00__10__00__00__11__11__11__11__00
& 0010001000100010001000100010001000100010001000100010001000100010
------------------------------------------------------------------
  0010000000000010001000100000000000100000000000100010001000100000

  _110_101_100_110_011_110_001_000_110_100_000_111_111_111_011_000
& 0100010001000100010001000100010001000100010001000100010001000100
------------------------------------------------------------------
  0100010001000100000001000000000001000100000001000100010000000000


  1110110111000110001101101001000011100100000001110111111110110000
& 1000100010001000100010001000100010001000100010001000100010001000
------------------------------------------------------------------
  1000100010000000000000001000000010000000000000000000100010000000

*/
